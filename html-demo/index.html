<html>
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css"/>
    <link rel="stylesheet" href="leaflet.zoomdisplay.css"/>
    <link rel="stylesheet" href="Leaflet.Coordinates.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-easybutton@2.0.0/src/easy-button.css">

    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script src="leaflet.wms.js"></script>
    <script src="TileLayer.Grayscale.js"></script>
    <script src="leaflet.zoomdisplay-src.js"></script>
    <script src="Leaflet.Coordinates.js"></script>
    <script src="https://unpkg.com/leaflet-easybutton@2.0.0/src/easy-button.js"></script>

    <style>
        #mapid {
            height: 100%;
            width: 100%;
        }

        .leaflet-tile-border {
            border: solid black 1px;
        }

        .img-trans {
            opacity: 0.5;
            display: inline-block;
        }


    </style>
</head>
<body>
<div id="mapid"></div>
<script language="JavaScript">

//    var url = '/cgi-bin/mapserv?map=/Users/nicolas/bin/mapserver-basemaps/';
    //    server:
    var url = '/cgi-bin/mapserv?map=/home/ubuntu/apps/mapserver-basemaps/';

    var urlMapcache = '/mapcache-osm/tms/1.0.0/LAYER@GoogleMapsCompatible/{z}/{x}/{y}.png';
//    var urlMapcache = '/mapcache-osm/tms/1.0.0/osm_default_sym_style_ts@GoogleMapsCompatible/{z}/{x}/{y}.png';
    //    var urlMapcache = '/mapcache-cache/{z}/{x}/{y}.png';

    //    var bingSource = L.WMS.source(url + "osm-bing.map", {
    //        'transparent': true,
    //        'tiled': true
    //
    //    });
    //
    //    var michelinSource = L.WMS.source(url + "osm-michelin.map", {
    //        'transparent': true,
    //        'tiled': false
    //    });
    //
    //    var googleSource = L.WMS.source(url + "osm-google.map", {
    //        'transparent': true,
    //        'tiled': false
    //    });
    //
    //    var defaultSource = L.WMS.source(url + "osm-default.map", {
    //        'transparent': true,
    //        'tiled': false
    //    });

    var map = L.map('mapid').setView(
//        [43.604, 1.40], 8
        [43.6447, 1.4557], 11
    );

    //    var defaultLayer = L.tileLayer.wms(url + "/osm-default.map", {
    //        layers: 'default',
    //        format: 'image/png',
    //        transparent: true,
    //        attribution: "Efficity"
    //    }).addTo(map);

    ////////////// OSM live TMS ////////////////////////////////////////////////////////////////////////////////////////
    var osmLayer = L.tileLayer('http://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    });

    ////////////// Mapcache layers for Efficity Application ////////////////////////////////////////////////////////////
    // forces B&W by Leaflet plugin
    var googleNoLabelsMapcacheLayer = new L.TileLayer.Grayscale(urlMapcache.replace('LAYER', 'osm_google_no_labels_ts'), {
        'tms': true,
        attribution: "&copy; <a href='http://www.efficity.com'>Efficity</a> based on OSM data",
    });

    var googleLabelsOnlyMapcacheLayer = new L.TileLayer(urlMapcache.replace('LAYER', 'osm_google_labels_only_ts'), {
        'tms': true,
        attribution: "&copy; <a href='http://www.efficity.com'>Efficity</a> based on OSM data",
    });

    var symbolsOnlyMapcacheLayer = new L.TileLayer(urlMapcache.replace('LAYER', 'osm_symbols_only_ts'), {
        'tms': true,
        attribution: "&copy; <a href='http://www.efficity.com'>Efficity</a> based on OSM data",
    });

    ////////////// MapServer layers to test Mapserver available styles ////////////////////////////////////////////////////
    var googleLayer = L.tileLayer.wms(url + "/osm-google.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    });

    var googleSymLayer = L.tileLayer.wms(url + "/osm-google-buildings-symbols.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    });

    var symOnlyLayer = L.tileLayer.wms(url + "/osm-symbols-only.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    }).addTo(map);

    var bingSymLayer = L.tileLayer.wms(url + "/osm-bing-buildings-symbols.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    });

    var michelinSymLayer = L.tileLayer.wms(url + "/osm-michelin-buildings-symbols.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    });

    var defaultSymLayer = L.tileLayer.wms(url + "/osm-default-symbols.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    });

    var googleLabelsOnlyLayer = L.tileLayer.wms(url + "osm-google-labels-only.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    });

    var googleNoLabelsLayer = L.tileLayer.wms(url + "osm-google-no-labels.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    });

    var bingLayer = L.tileLayer.wms(url + "osm-bing.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    });

    var michelinLayer = L.tileLayer.wms(url + "osm-michelin.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Efficity"
    });

    var blackWhiteLayer = L.tileLayer.wms(url + "osm-grayscale.map", {
        layers: 'default',
        format: 'image/png',
        transparent: true,
        attribution: "Nicolas Ribot for MapServer project"
    });

    //    defaultSource.getLayer("default").addTo(map);
    //    bingSource.getLayer("default").addTo(map);
    //    googleSource.getLayer("default").addTo(map);
    //    michelinSource.getLayer("default").addTo(map);
    var emptyLayer = L.tileLayer('').addTo(map);
    var baseLayers = {
        'empty': emptyLayer,
        "OSM b&w ": osmLayer
    };
    var overlays = {
        "MC Google no labels": googleNoLabelsMapcacheLayer,
        "MC Google labels only": googleLabelsOnlyMapcacheLayer,
        "MC OSM Symbols only": symbolsOnlyMapcacheLayer,
        "MS Default+Symbols": defaultSymLayer,
        "Symbols": symOnlyLayer,
        "MS Google": googleLayer,
        "MS Google+symbols": googleSymLayer,
        "MS Bing": bingLayer,
        "MS Bing+symbols": bingSymLayer,
        "MS Michelin": michelinLayer,
        "MS Micheling+symbols": michelinSymLayer,
        "MS Google no labels": googleNoLabelsLayer,
        "MS Google labels only": googleLabelsOnlyLayer,
        "MS Google Grayscale": blackWhiteLayer
    };

    L.control.layers(baseLayers, overlays).addTo(map);

    // coordinates:
    L.control.coordinates().addTo(map);

    //custom button
    L.easyButton('<img id="imggrid" class="img-trans" width="18" height="18" src="grid.png">', function (btn, map) {
        $('.leaflet-tile').toggleClass('leaflet-tile-border');
        $('#imggrid').toggleClass('img-trans');
    }).addTo(map);

</script>
</body>
</html>