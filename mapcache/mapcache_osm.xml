<?xml version="1.0" encoding="UTF-8"?>

<!-- see the accompanying mapcache.xml.sample for a fully commented configuration file -->

<mapcache>
   <metadata>
      <title>Efficity OSM Mapcache Tile Service</title>
      <abstract>OSM FR data tile service backed by MapServer/Mapcache with google-style styling</abstract>
   </metadata>

<!--____________ sources___________________-->

   <source name="osm_google_no_labels_src" type="wms">
      <getmap>
         <params>
            <MAP>/home/ubuntu/apps/mapserver-basemaps/osm-google-no-labels.map</MAP>
             <!--<MAP>/Users/nicolas/bin/mapserver-basemaps/osm-google-no-labels.map</MAP>-->
            <LAYERS>default</LAYERS>
            <FORMAT>image/png</FORMAT>
            <TRANSPARENT>true</TRANSPARENT>
         </params>
      </getmap>
      <http>
         <url>http://localhost/cgi-bin/mapserv</url>
      </http>
   </source>

   <source name="osm_bing_style_src" type="wms">
      <getmap>
         <params>
            <MAP>/home/ubuntu/apps/mapserver-basemaps/osm-bing.map</MAP>
            <LAYERS>default</LAYERS>
            <FORMAT>image/png</FORMAT>
            <TRANSPARENT>true</TRANSPARENT>
         </params>
      </getmap>
      <http>
         <url>http://localhost/cgi-bin/mapserv</url>
      </http>
   </source>

   <source name="osm_michelin_style_src" type="wms">
      <getmap>
         <params>
            <MAP>/home/ubuntu/apps/mapserver-basemaps/osm-michelin.map</MAP>
            <LAYERS>default</LAYERS>
            <FORMAT>image/png</FORMAT>
            <TRANSPARENT>true</TRANSPARENT>
         </params>
      </getmap>
      <http>
         <url>http://localhost/cgi-bin/mapserv</url>
      </http>
   </source>

   <source name="osm_default_style_src" type="wms">
      <getmap>
         <params>
            <MAP>/home/ubuntu/apps/mapserver-basemaps/osm-default.map</MAP>
            <LAYERS>default</LAYERS>
            <FORMAT>image/png</FORMAT>
            <TRANSPARENT>true</TRANSPARENT>
         </params>
      </getmap>
      <http>
         <url>http://localhost/cgi-bin/mapserv</url>
      </http>
   </source>

<!--____________ caches___________________-->

   <cache name="disk" type="disk" layout="template">
        <base>/data/Documents/geodata/caches/mapcache</base>
        <!--<base>/Volumes/GROSSD/tmp/mapcache</base>-->

        <!--<template>/Volumes/GROSSD/tmp/mapcache/{tileset}/{grid}/{z}/{x}/{y}.{ext}</template>-->
        <template>/data/Documents/geodata/caches/mapcache/{tileset}/{grid}/{z}/{x}/{y}.{ext}</template>

        <!--no symlink for template (only for defautl layout)-->
        <!--<symlink_blank/>-->
   </cache>

<!--____________ tilesets ___________________-->

   <!--No src tileset: pure cache acces, to test cache   -->
  <tileset name="osm_google_no_labels_ts">
      <!--comment out to use a readonly cache => pure cache access: no tile generation-->
      <!--<source>osm_google_no_labels_src</source>-->

      <cache>disk</cache>
      <grid>GoogleMapsCompatible</grid>
      <format>PNG</format>
      <metatile>8 8</metatile>
      <metabuffer>10</metabuffer>
      <expires>3600</expires>
   </tileset>

   <tileset name="osm_bing_style_ts">
      <source>osm_bing_style_src</source>
      <cache>disk</cache>
      <grid>GoogleMapsCompatible</grid>
      <format>PNG</format>
      <metatile>8 8</metatile>
      <metabuffer>10</metabuffer>
      <expires>3600</expires>
   </tileset>

   <tileset name="osm_michelin_style_ts">
      <source>osm_bing_style_src</source>
      <cache>disk</cache>
      <grid>GoogleMapsCompatible</grid>
      <format>PNG</format>
      <metatile>8 8</metatile>
      <metabuffer>10</metabuffer>
      <expires>3600</expires>
   </tileset>

   <tileset name="osm_default_style_ts">
      <source>osm_bing_style_src</source>
      <cache>disk</cache>
      <grid>GoogleMapsCompatible</grid>
      <format>PNG</format>
      <metatile>8 8</metatile>
      <metabuffer>10</metabuffer>
      <expires>3600</expires>
   </tileset>

<!--____________ services ___________________-->
   <service type="wms" enabled="true">
      <full_wms>assemble</full_wms>
      <resample_mode>bilinear</resample_mode>
      <format>PNG</format>
      <maxsize>4096</maxsize>
   </service>
   <service type="wmts" enabled="true"/>
   <service type="tms" enabled="true"/>
   <service type="kml" enabled="true"/>
   <service type="gmaps" enabled="true"/>
   <service type="ve" enabled="true"/>
   <service type="mapguide" enabled="true"/>
   <service type="demo" enabled="true"/>

<!--____________ conf ___________________-->
   <errors>report</errors>

   <locker type="disk">
     <!--<directory>/Volumes/GROSSD/tmp/mapcache</directory>-->
     <directory>/data/Documents/geodata/caches/mapcache</directory>
     <timeout>300</timeout>
    </locker>

</mapcache>
