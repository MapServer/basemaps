#include theme
#include "dbconnection"
MAP
OUTPUTFORMAT
    NAME agg
    DRIVER AGG/PNG
    IMAGEMODE RGB
    FORMATOPTION "INTERLACE=false"
    MIMETYPE "image/png"
END
FONTSET "fonts.lst"
IMAGETYPE agg
MAXSIZE 4000
SIZE 800 800
EXTENT 47586 1621243 1197769 2679357
EXTENT 16805492 -4049385 16857351 -3975830
UNITS OSM_UNITS 
IMAGECOLOR _water_clr
WEB
    METADATA
      "ows_enable_request"   "*"
       wms_srs OSM_WMS_SRS 
        labelcache_map_edge_buffer "-10"
        wms_title "osm france"
    END
END

DEBUG 10
CONFIG "PROJ_LIB" _proj_lib
CONFIG "MS_ERRORFILE" "stderr"
PROJECTION
##900913
##"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"
##"init=epsg:27572"
##"+proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"
##"init=epsg:OSM_SRID"
"init=epsg:OSM_SRID"
END


LAYER
    TYPE POLYGON
    STATUS ON
    GROUP "default"
    NAME "land"
    PROJECTION
        "init=epsg:900913"
    END
    MINSCALEDENOM 5000000
    DATA "data/shoreline_300"
    CLASS
        STYLE
            COLOR _bg_clr
            OUTLINECOLOR _bg_clr
        END
    END
END

LAYER
    TYPE POLYGON
    STATUS ON
    GROUP "default"
    NAME "land"
    PROJECTION
        "init=epsg:900913"
    END
    MAXSCALEDENOM 5000000
    DATA "data/processed_p"
    CLASS
        STYLE
            COLOR _bg_clr
            OUTLINECOLOR _bg_clr
        END
    END
END

LAYER
   TYPE LINE
   STATUS ON
   GROUP "default"
   NAME "borders"
   MINSCALEDENOM 5000000
   DATA "data/10m_admin_0_boundary_lines_land"
    CLASS
        STYLE
            WIDTH 0.5
            COLOR _border_clr
        END
    END
END

SYMBOL
    NAME "rail"
    TYPE TRUETYPE
    FONT sc
    CHARACTER '|'
    GAP -3
END

SYMBOL
    NAME "railfar"
    TYPE SIMPLE
    PATTERN 5 5 END
END

SYMBOL
    NAME "path"
    TYPE SIMPLE
    PATTERN 1 1 END
END

SYMBOL
    NAME "track"
    TYPE SIMPLE
    PATTERN
        5 5 
    END
END

SYMBOL
    NAME "tunnel"
    TYPE SIMPLE
    PATTERN 2 2 END
END

SYMBOL
    NAME "dash"
    TYPE SIMPLE
    PATTERN 2 2 END
END

SYMBOL
    NAME "butt"
    TYPE SIMPLE
    LINECAP butt
END

#include "landuse.map"
#include "highways_5k.map"
#include "highways_10k.map"
#include "highways_25k.map"
#include "highways_50k.map"
#include "highways_100k.map"
#include "highways_250k.map"
#include "highways_500k.map"
#include "highways_1m.map"
#include "highways_2.5m.map"
#include "highways_5m.map"
#include "highways_10m.map"


##include "buildings.map"



SYMBOL
    NAME "citycircle"
    TYPE ELLIPSE
    POINTS  1 1 END
    FILLED TRUE
END


SYMBOL
 NAME "oneway"
 TYPE TRUETYPE
 FONT scb
 CHARACTER "&#8594;"
 GAP -150
END

LAYER
    TYPE LINE
    STATUS ON
    PROJECTION
        "init=epsg:OSM_SRID"
    END
    GROUP "default"
    NAME "oneways"
    CONNECTIONTYPE postgis
    CONNECTION _db_connection
    DATA "way from (select way, osm_id from osm_line where oneway='yes' and (highway ~ 'link' or highway in ('residential','tertiary','secondary','primary','service')) order by z_order) as foo using unique osm_id using srid=OSM_SRID"
    PROCESSING "CLOSE_CONNECTION=DEFER"
    MAXSCALEDENOM 10010
    CLASS
        STYLE
            SYMBOL "oneway"
            SIZE 11
            COLOR _oneway_clr
        END
    END
END

#include "places_25k.map"
#include "places_50k.map"
#include "places_100k.map"
#include "places_250k.map"
#include "places_500k.map"
#include "places_1m.map"
#include "places_2.5m.map"
#include "places_5m.map"
#include "places_10m.map"
#include "places_25m.map"
#include "places_50m.map"


END
